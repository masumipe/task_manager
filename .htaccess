# .htaccess for Building Management System (public folder)

# Enable URL rewriting
RewriteEngine On

# Set the base directory if not in root (uncomment and set if needed)
# RewriteBase /testbuild/public/

# Redirect all requests to index.php except for existing files and directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# RewriteRule ^(.*)$ index.php [QSA,L]
RewriteRule ^(.*)$ public/index.php?url=$1 [QSA,L]

# Security: Prevent access to sensitive files
<FilesMatch "\.(env|json|lock|md|git|ini|log|sh|sql|bak|yml|yaml|xml)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Security: Prevent directory listing
Options -Indexes

# Set proper MIME types for CSS and JS
AddType text/css .css
AddType application/javascript .js

# Allow CORS for API endpoints (optional, adjust as needed)
#<IfModule mod_headers.c>
#    Header set Access-Control-Allow-Origin "*"
#</IfModule>
